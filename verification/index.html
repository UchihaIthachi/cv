<!DOCTYPE html>
<html lang="en" class="antialiased scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Resume Artifacts</title>
    <meta name="description" content="Automated CV/Resume PDF builds from LaTeX sources. View and download generated profiles.">
    <meta name="theme-color" content="#3b82f6">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“„</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#3b82f6', 
                        secondary: '#64748b',
                    }
                }
            }
        }
    </script>
    <style>
        .glass {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .dark .glass {
            background: rgba(15, 23, 42, 0.75);
        }
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.15);
            border-color: #3b82f6;
        }
        /* Custom scrollbar for dark mode */
        html.dark {
            color-scheme: dark;
        }
        
        @keyframes pulse-slow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .skeleton {
            background-color: #e2e8f0;
            animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .dark .skeleton {
            background-color: #334155;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-100 min-h-screen flex flex-col transition-colors duration-300 selection:bg-blue-500 selection:text-white">

    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 px-5 py-2.5 bg-blue-600 text-white font-medium rounded-lg shadow-xl ring-2 ring-white dark:ring-slate-900">
        Skip to content
    </a>

    <!-- Header -->
    <header>
        <nav class="fixed w-full z-50 glass border-b border-slate-200 dark:border-slate-800 transition-colors duration-300" aria-label="Main Navigation">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center space-x-3">
                        <div class="bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg text-primary">
                            <i class="fa-solid fa-file-pdf text-xl"></i>
                        </div>
                        <span class="font-bold text-xl tracking-tight text-slate-800 dark:text-slate-100">Resume Artifacts</span>
                    </div>
                    <div class="flex items-center space-x-2 sm:space-x-4">
                        <a href="https://github.com/ishandotsh/resume" target="_blank" class="p-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-primary" aria-label="GitHub Repository">
                            <i class="fa-brands fa-github text-xl"></i>
                        </a>
                        <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 hover:text-yellow-500 dark:hover:text-yellow-400 transition-colors focus:outline-none focus:ring-2 focus:ring-primary" aria-label="Toggle Dark Mode" aria-pressed="false">
                            <i class="fa-solid fa-moon dark:hidden text-xl"></i>
                            <i class="fa-solid fa-sun hidden dark:inline text-xl"></i>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full flex-grow">
        
        <!-- Hero Section -->
        <section aria-labelledby="hero-heading" class="text-center mb-12">
            <h1 id="hero-heading" class="text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white sm:text-5xl mb-4 bg-clip-text text-transparent bg-gradient-to-r from-slate-900 to-slate-600 dark:from-white dark:to-slate-400">
                Generated CV Profiles
            </h1>
            <p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto mb-6 leading-relaxed">
                Automated PDF builds from LaTeX source code via GitHub Actions. <br class="hidden sm:inline">Select a specific profile below to view or download.
            </p>
            <div id="last-updated" role="status" class="inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border border-blue-100 dark:border-blue-800 transition-colors">
                <i class="fa-solid fa-circle-notch fa-spin mr-2"></i> Fetching metadata...
            </div>
        </section>

        <!-- Search & Filter Section -->
        <section aria-labelledby="search-heading" class="max-w-2xl mx-auto mb-12">
            <h2 id="search-heading" class="sr-only">Search Profiles</h2>
            <div class="relative group" role="search">
                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <i class="fa-solid fa-search text-slate-400 group-focus-within:text-primary transition-colors"></i>
                </div>
                <input type="text" id="search-input" 
                    class="block w-full pl-11 pr-12 py-3.5 border border-slate-200 dark:border-slate-700 rounded-xl leading-5 bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm shadow-sm transition-all"
                    placeholder="Search profiles (e.g., Backend, Fullstack, Web3)..."
                    aria-label="Search profiles">
                <button id="search-clear" class="absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 cursor-pointer hidden focus:outline-none focus:text-primary" aria-label="Clear search">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <div class="flex justify-between items-center mt-3 px-1">
                <p class="text-xs text-slate-500 dark:text-slate-400">
                    Filter by profile name or file type.
                </p>
                <p id="results-count" class="text-xs font-medium text-slate-500 dark:text-slate-400" aria-live="polite">
                    <!-- Count injected via JS -->
                </p>
            </div>
        </section>

        <!-- Grid Section -->
        <section aria-labelledby="profiles-heading">
            <h2 id="profiles-heading" class="sr-only">Available Profiles</h2>
            
            <div id="artifacts-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
                <!-- Skeletons (Initial State) -->
                <div class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 h-64 flex flex-col">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="h-12 w-12 rounded-xl skeleton"></div>
                        <div class="space-y-2 flex-1">
                            <div class="h-5 w-3/4 skeleton rounded"></div>
                            <div class="h-3 w-1/2 skeleton rounded"></div>
                        </div>
                    </div>
                    <div class="space-y-3 flex-grow">
                        <div class="h-4 w-full skeleton rounded"></div>
                        <div class="h-4 w-5/6 skeleton rounded"></div>
                    </div>
                    <div class="mt-6 flex gap-3">
                        <div class="h-10 flex-1 skeleton rounded-lg"></div>
                        <div class="h-10 flex-1 skeleton rounded-lg"></div>
                    </div>
                </div>
                <!-- Duplicate Skeletons -->
                <div class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 h-64 hidden sm:flex flex-col">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="h-12 w-12 rounded-xl skeleton"></div>
                        <div class="space-y-2 flex-1">
                            <div class="h-5 w-3/4 skeleton rounded"></div>
                            <div class="h-3 w-1/2 skeleton rounded"></div>
                        </div>
                    </div>
                    <div class="space-y-3 flex-grow">
                        <div class="h-4 w-full skeleton rounded"></div>
                        <div class="h-4 w-5/6 skeleton rounded"></div>
                    </div>
                    <div class="mt-6 flex gap-3">
                        <div class="h-10 flex-1 skeleton rounded-lg"></div>
                        <div class="h-10 flex-1 skeleton rounded-lg"></div>
                    </div>
                </div>
                <div class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 h-64 hidden lg:flex flex-col">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="h-12 w-12 rounded-xl skeleton"></div>
                        <div class="space-y-2 flex-1">
                            <div class="h-5 w-3/4 skeleton rounded"></div>
                            <div class="h-3 w-1/2 skeleton rounded"></div>
                        </div>
                    </div>
                    <div class="space-y-3 flex-grow">
                        <div class="h-4 w-full skeleton rounded"></div>
                        <div class="h-4 w-5/6 skeleton rounded"></div>
                    </div>
                    <div class="mt-6 flex gap-3">
                        <div class="h-10 flex-1 skeleton rounded-lg"></div>
                        <div class="h-10 flex-1 skeleton rounded-lg"></div>
                    </div>
                </div>
            </div>
            
            <!-- Empty / Error States -->
            <div id="empty-state" class="hidden text-center py-20 bg-white dark:bg-slate-800/50 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 mt-6">
                <div class="bg-slate-50 dark:bg-slate-700/50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fa-regular fa-folder-open text-3xl text-slate-400"></i>
                </div>
                <h3 class="text-lg font-medium text-slate-900 dark:text-white mb-1">No profiles found</h3>
                <p class="text-slate-500 dark:text-slate-400 text-sm">Try adjusting your search terms.</p>
                <button onclick="clearSearch()" class="mt-4 text-primary hover:text-blue-600 font-medium text-sm">Clear search</button>
            </div>

            <div id="error-state" class="hidden text-center py-20 mt-6">
                <div class="bg-red-50 dark:bg-red-900/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500">
                    <i class="fa-solid fa-triangle-exclamation text-3xl"></i>
                </div>
                <h3 class="text-lg font-medium text-slate-900 dark:text-white mb-1">Unable to load profiles</h3>
                <p id="error-message" class="text-slate-500 dark:text-slate-400 text-sm mb-6 max-w-md mx-auto"></p>
                <button onclick="init()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors">
                    <i class="fa-solid fa-rotate-right mr-2"></i> Retry
                </button>
            </div>
        </section>

        <noscript>
            <div class="mt-8 p-4 bg-yellow-50 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 rounded-lg border border-yellow-200 dark:border-yellow-800 text-center">
                <i class="fa-solid fa-circle-exclamation mr-2"></i> JavaScript is required to view and search generated profiles.
            </div>
        </noscript>
    </main>

    <!-- Footer -->
    <footer class="border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 mt-auto transition-colors duration-300">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                <div class="text-center md:text-left">
                    <p class="text-slate-500 dark:text-slate-400 text-sm">
                        &copy; <span id="year"></span> CV/Resume Automation.
                    </p>
                    <p class="text-slate-400 dark:text-slate-500 text-xs mt-1">
                        Built from LaTeX sources via GitHub Actions.
                    </p>
                </div>
                <div class="flex space-x-6">
                     <a href="https://github.com/ishandotsh/resume" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors" aria-label="GitHub Repository">
                        <i class="fa-brands fa-github text-xl"></i>
                     </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" role="alert" aria-live="assertive" class="fixed bottom-6 right-6 transform translate-y-24 opacity-0 transition-all duration-300 z-50 glass bg-slate-900/90 dark:bg-slate-800/90 text-white px-5 py-3 rounded-xl shadow-2xl border border-slate-700/50 flex items-center space-x-3 backdrop-blur-md">
        <div class="flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
            <i class="fa-solid fa-check text-white text-xs"></i>
        </div>
        <span id="toast-message" class="font-medium text-sm">Action successful</span>
    </div>

    <script>
        // Set year
        document.getElementById('year').textContent = new Date().getFullYear();

        // Theme Toggle Logic
        const themeToggle = document.getElementById('theme-toggle');
        const metaThemeColor = document.querySelector('meta[name="theme-color"]');
        const html = document.documentElement;

        function updateTheme(isDark) {
            if (isDark) {
                html.classList.add('dark');
                localStorage.theme = 'dark';
                metaThemeColor.setAttribute('content', '#0f172a'); // slate-900
                themeToggle.setAttribute('aria-pressed', 'true');
            } else {
                html.classList.remove('dark');
                localStorage.theme = 'light';
                metaThemeColor.setAttribute('content', '#f8fafc'); // slate-50
                themeToggle.setAttribute('aria-pressed', 'false');
            }
        }
        
        // Initial Theme Check
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            updateTheme(true);
        } else {
            updateTheme(false);
        }

        themeToggle.addEventListener('click', () => {
            updateTheme(!html.classList.contains('dark'));
        });

        // Search UI Logic
        const searchInput = document.getElementById('search-input');
        const searchClear = document.getElementById('search-clear');
        
        function updateClearButton() {
            if (searchInput.value.length > 0) {
                searchClear.classList.remove('hidden');
            } else {
                searchClear.classList.add('hidden');
            }
        }

        function clearSearch() {
            searchInput.value = '';
            updateClearButton();
            searchInput.focus();
            // Trigger input event manually to refresh grid
            searchInput.dispatchEvent(new Event('input'));
        }

        searchClear.addEventListener('click', clearSearch);
        searchInput.addEventListener('input', updateClearButton);

        // Data Fetching and Rendering
        async function init() {
            const grid = document.getElementById('artifacts-grid');
            const errorState = document.getElementById('error-state');
            const errorMessage = document.getElementById('error-message');
            const lastUpdated = document.getElementById('last-updated');
            
            // Reset states
            errorState.classList.add('hidden');
            grid.classList.remove('hidden');
            
            try {
                // Minimum loading time for skeleton experience (optional, but nice)
                const start = Date.now();
                const response = await fetch('resumes.json');
                
                if (!response.ok) throw new Error(`HTTP Error ${response.status}: ${response.statusText}`);
                
                const data = await response.json();
                
                // Ensure at least 500ms of loading state for smoothness
                const elapsed = Date.now() - start;
                if (elapsed < 300) await new Promise(r => setTimeout(r, 300 - elapsed));
                
                render(data);
                
                // Update Last Updated Time
                if (data.metadata && data.metadata.generated_at) {
                    const date = new Date(data.metadata.generated_at);
                    const relativeTime = getRelativeTime(date);
                    lastUpdated.innerHTML = `
                        <i class="fa-regular fa-clock mr-2"></i> 
                        <span class="sr-only">Last updated:</span> ${relativeTime}
                    `;
                    lastUpdated.title = date.toLocaleString(); // Tooltip full date
                    lastUpdated.classList.remove('bg-blue-50', 'text-blue-700', 'border-blue-100');
                    lastUpdated.classList.add('bg-green-50', 'text-green-700', 'border-green-200', 'dark:bg-green-900/20', 'dark:text-green-400', 'dark:border-green-900');
                }

                // Search functionality
                searchInput.addEventListener('input', (e) => {
                    const term = e.target.value.toLowerCase();
                    const filtered = data.files.filter(f => 
                        f.name.toLowerCase().includes(term) || 
                        f.profile.toLowerCase().includes(term)
                    );
                    render({ ...data, files: filtered }, true);
                });

            } catch (error) {
                console.error("Initialization error:", error);
                grid.classList.add('hidden');
                errorState.classList.remove('hidden');
                errorMessage.textContent = error.message || 'Failed to connect to the data source.';
                lastUpdated.innerHTML = `<i class="fa-solid fa-circle-exclamation mr-2"></i> Error loading status`;
                lastUpdated.classList.add('bg-red-50', 'text-red-700');
            }
        }

        function getRelativeTime(date) {
            const now = new Date();
            const diffInSeconds = Math.floor((now - date) / 1000);
            
            if (diffInSeconds < 60) return 'Just now';
            if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;
            if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)}h ago`;
            return date.toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' });
        }

        function formatBytes(bytes, decimals = 1) {
            if (!+bytes) return '0 B';
            const k = 1024;
            const dm = decimals < 0 ? 0 : decimals;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;
        }

        function render(data, isUpdate = false) {
            const grid = document.getElementById('artifacts-grid');
            const emptyState = document.getElementById('empty-state');
            const resultsCount = document.getElementById('results-count');
            
            resultsCount.textContent = `Showing ${data.files.length} profile${data.files.length !== 1 ? 's' : ''}`;

            if (data.files.length === 0) {
                grid.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            } else {
                emptyState.classList.add('hidden');
            }

            const html = data.files.map(file => {
                // Determine color based on profile type
                const colors = [
                    'bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200',
                    'bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-200',
                    'bg-violet-100 text-violet-800 dark:bg-violet-900/50 dark:text-violet-200',
                    'bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-200'
                ];
                // Simple hash to pick consistent color
                const colorIndex = file.name.charCodeAt(0) % colors.length;
                const colorClass = colors[colorIndex];
                
                // Date formatting
                const fileDate = new Date(file.date);
                const formattedDate = fileDate.toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' });

                return `
                <article class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 card-hover flex flex-col relative overflow-hidden group">
                    <div class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity focus-within:opacity-100">
                         <button onclick="copyLink(this, '${file.name}')" class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-400 hover:text-primary transition-colors focus:outline-none focus:ring-2 focus:ring-primary" aria-label="Copy link to ${file.profile} profile" title="Copy Link">
                            <i class="fa-regular fa-copy"></i>
                        </button>
                    </div>
                    
                    <div class="flex items-center space-x-4 mb-5">
                        <div class="h-14 w-14 rounded-2xl bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 flex items-center justify-center text-red-500 shadow-sm border border-red-100 dark:border-red-900/30">
                            <i class="fa-solid fa-file-pdf text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-slate-900 dark:text-white capitalize tracking-tight">
                                ${file.profile}
                            </h3>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-semibold ${colorClass} mt-1.5">
                                ${file.name}
                            </span>
                        </div>
                    </div>
                    
                    <div class="flex-grow space-y-3">
                        <div class="flex items-center justify-between text-sm text-slate-500 dark:text-slate-400 border-b border-dashed border-slate-100 dark:border-slate-700 pb-3">
                            <span class="flex items-center"><i class="fa-regular fa-hard-drive mr-2 w-4 text-slate-400"></i> Size</span>
                            <span class="font-medium font-mono text-slate-700 dark:text-slate-300">${formatBytes(file.size)}</span>
                        </div>
                        <div class="flex items-center justify-between text-sm text-slate-500 dark:text-slate-400">
                            <span class="flex items-center"><i class="fa-regular fa-calendar mr-2 w-4 text-slate-400"></i> Date</span>
                            <span class="font-medium text-slate-700 dark:text-slate-300" title="${fileDate.toLocaleString()}">${formattedDate}</span>
                        </div>
                    </div>

                    <div class="mt-6 pt-6 flex gap-3">
                        <a href="${file.name}" target="_blank" class="flex-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 text-sm font-semibold py-2.5 rounded-xl text-center transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400" aria-label="View ${file.profile} Profile" title="View PDF in browser">
                            View
                        </a>
                        <a href="${file.name}" download class="flex-1 bg-primary hover:bg-blue-600 text-white text-sm font-semibold py-2.5 rounded-xl text-center transition-colors shadow-lg shadow-blue-500/20 focus:outline-none focus:ring-2 focus:ring-blue-400" aria-label="Download ${file.profile} Profile" title="Download PDF file">
                            Download
                        </a>
                    </div>
                </article>
                `;
            }).join('');

            grid.innerHTML = html;
        }

        function copyLink(btn, filename) {
            const url = window.location.href.replace('index.html', '').split('?')[0].split('#')[0] + filename;
            
            navigator.clipboard.writeText(url).then(() => {
                showToast(`Link to ${filename} copied!`);
                
                // Visual feedback on button
                const icon = btn.querySelector('i');
                const originalClass = icon.className;
                
                icon.className = 'fa-solid fa-check text-green-500';
                btn.classList.add('bg-green-50', 'dark:bg-green-900/30');
                
                setTimeout(() => {
                    icon.className = originalClass;
                    btn.classList.remove('bg-green-50', 'dark:bg-green-900/30');
                }, 2000);
            }).catch(err => {
                console.error('Could not copy text: ', err);
                showToast('Failed to copy link', true);
            });
        }

        function showToast(msg, isError = false) {
            const toast = document.getElementById('toast');
            const msgEl = document.getElementById('toast-message');
            const iconContainer = toast.querySelector('div');
            const icon = iconContainer.querySelector('i');
            
            msgEl.textContent = msg;
            
            if (isError) {
                iconContainer.className = 'flex-shrink-0 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center';
                icon.className = 'fa-solid fa-xmark text-white text-xs';
            } else {
                iconContainer.className = 'flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center';
                icon.className = 'fa-solid fa-check text-white text-xs';
            }

            toast.classList.remove('translate-y-24', 'opacity-0');
            
            setTimeout(() => {
                toast.classList.add('translate-y-24', 'opacity-0');
            }, 3000);
        }

        // Init
        init();
    </script>
</body>
</html>